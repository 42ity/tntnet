AC_INIT([tntnet],[1.1.3],[Tommi Mäkitalo <t.maekitalo@epgmbh.de>])
AM_INIT_AUTOMAKE(tntnet, 1.1.3)

abi_current=1
abi_revision=1
abi_age=0
sonumber=${abi_current}:${abi_revision}:${abi_age}
AC_SUBST(sonumber)

unset CDPATH

AC_CONFIG_HEADERS([framework/common/config.h])
AC_CONFIG_HEADERS([framework/common/tnt/config.h])
AC_CONFIG_SRCDIR([framework/runtime/tntnet.cpp])

AC_PROG_CXX(g++-3.0 g++ c++ CC)
AC_PROG_LIBTOOL

AC_LANG(C++)

AC_CHECK_HEADERS([cxxtools/tcpstream.h])

loggertype=stdout

AC_CHECK_HEADER([log4cplus/logger.h],[AC_DEFINE([TNTNET_USE_LOG4CPLUS], [], [check for log4cplus])
   loggertype=log4cplus
   LDFLAGS=-llog4cplus])

if test $loggertype = stdout; then
AC_CHECK_HEADER([log4cxx/logger.h],[AC_DEFINE([TNTNET_USE_LOG4CXX], [], [check for log4cxx])
   loggertype=log4cxx
   LDFLAGS=-llog4cxx])
fi

if test $loggertype = stdout; then
  AC_MSG_WARN(logging to stdout only !)
  AC_DEFINE(TNTNET_USE_LOGSTDOUT, [], [use logging to stdout])
fi

AC_CHECK_HEADER([boost/regex.hpp])

AC_CONFIG_FILES([
    Makefile
    framework/common/Makefile
    framework/runtime/Makefile
    framework/ecpp/Makefile
    framework/defcomp/Makefile
    sdk/tools/common/Makefile
    sdk/tools/ecppc/Makefile
    sdk/tools/ecppl/Makefile
    sdk/tools/ecppll/Makefile
    etc/Makefile
    ])

AC_OUTPUT
